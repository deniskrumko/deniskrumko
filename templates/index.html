{% extends "base.html" %}
{% load static i18n %}

{% block extrastyle %}
  <link rel="stylesheet" href="{% static 'css/index.css' %}">

  <style media="screen">
  {% with menu|get_color:active_menu as color %}
  .dk-news-h2:hover {
    text-decoration: none;
    color: {{ color.accent }};
  }
  .dk-music-name:hover {
    color: {{ color.accent }};
  }
  {% endwith %}
  </style>

{% endblock %}

{% block extrajs %}
{% endblock %}

{% block body %}

{# Menu #}
{% include 'components/menu.html' %}

  <div class="uk-container uk-container-small">
    <h2 class="dk-bold">Новости</h2>

    <div class="uk-grid" uk-grid>
      <div class="uk-width-expand@xl uk-width-expand@l uk-width-expand@m uk-width-1-1@s">
        <ul id="component-tab-right" class="uk-switcher">
          {% for item in news_items %}
            <li>
              <div uk-grid>
                <div class="uk-width-2-5@xl uk-width-2-5@l uk-width-2-5@m uk-width-1-1@s">
                  <a href="{% url 'news:detail' item.slug %}">
                  {% if item.image %}
                  <img src="{{ item.image.url }}" alt="">
                  {% else %}
                  <img src="{% static 'images/placeholder.jpg' %}" alt="">
                  {% endif %}
                  </a>
                </div>
                <div class="uk-width-3-5@xl uk-width-3-5@l uk-width-3-5@m uk-width-1-1@s">
                  <h2 class="uk-margin-small-bottom">
                    <a class="dk-news-h2" href="{% url 'news:detail' item.slug %}">
                      {{ item.title }}
                    </a>
                  </h2>
                  <div class="uk-article-meta uk-margin-small-bottom">
                    {{ item.date|date:'d E Y' }}
                  </div>
                  {% autoescape off %}
                    {% if item.preview %}
                      {{ item.preview }}
                    {% else %}
                      {{ item.text }}
                    {% endif %}
                  {% endautoescape %}

                  {% if item.link %}
                  <div class="uk-margin-small-top">
                    <a class="dk-a" href="{{ item.link }}">Посмотреть</a>
                  </div>
                  {% endif %}

                </div>
              </div>
            </li>
          {% endfor %}
        </ul>
      </div>
      <div class="uk-width-auto@xl uk-width-auto@l uk-width-auto@m uk-width-1-1@s">
        <div class="uk-visible@s">
          <p>Последние новости</p>
          <ul class="uk-tab-right" uk-tab="connect: #component-tab-right; animation: uk-animation-fade">
              {% for item in news_items %}
              <li><a href="#">{{ item.tab_title }}</a></li>
              {% endfor %}
          </ul>
        </div>
        <a href="{% url 'news:index' %}" class="dk-a uk-visible@s">
          Посмотреть все
        </a>
        <a href="{% url 'news:index' %}" class="uk-hidden@s uk-button uk-button-default uk-width-1-1">Посмотреть все новости</a>
      </div>
    </div>

    <h2 class="dk-bold">Музыка</h2>

    <div class="dk-music-index">
      <div uk-grid class="uk-child-width-1-6@xl uk-child-width-1-6@l uk-child-width-1-6@m uk-child-width-1-3@s uk-visible@s">
        {% for item in music_items %}
          <div class="dk-music-track">
            <a href="{% url 'music:index' %}#{{ item.slug }}" class="dk-music-bg" style="background-image: url({{ item.image_mini.url }}); background-color: {% if item.color %}{{ item.color }}{% else %}#666{% endif %};">
              <img class="dk-music-img" src="{{ item.image_mini.url }}">
              <img src="{% static 'images/play2.svg' %}" class="dk-music-play" alt="play">
            </a>
            <div class="uk-margin-small-top">
              <a class="dk-music-name" href="{% url 'music:index' %}#{{ item.slug }}">{{ item.name }}</a>
              <div class="dk-music-year">{{ item.year }}</div>
            </div>
          </div>

        {% endfor %}
      </div>

      <div class="uk-hidden@s">
        <dl class="uk-description-list uk-description-list-divider">
          {% for item in music_items %}
          <dt>
            <a href="{% url 'music:index' %}#{{ item.slug }}">
              <img class="dt-img" src="{{ item.image_mini.url }}" alt="">
              {{ item.name }}
            </a>
          </dt>
          <dd>{{ item.year }}</dd>
          {% endfor %}
        </dl>
      </div>
      <div class="uk-margin-top">
        <a class="dk-a" href="{% url 'music:index' %}">Посмотреть все</a>
      </div>
    </div>
  </div>
<br>
<br>

{% endblock %}
