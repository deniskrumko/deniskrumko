{% extends "base.html" %}
{% load static i18n %}


{% block extrastyle %}
  <link rel="stylesheet" href="{% static 'css/diary/detail.css' %}">

{% endblock %}

{% block extrajs %}

{% endblock %}

{% block body %}

{# Menu #}
{% include 'components/menu.html' %}

<div class="uk-container uk-container-small">

  {% include "diary/extra/breadcrumbs.html" %}

  <div class="dk-entry">
    <a class="dk-entry-daybutton dk-entry-prev-day uk-visible@s" href="{% url 'diary:detail' date=prev_date|date:'Y-m-d' %}">
      <span uk-icon="icon: chevron-left"></span>
    </a>
    <a class="dk-entry-daybutton dk-entry-next-day uk-visible@s" href="{% url 'diary:detail' date=next_date|date:'Y-m-d' %}">
      <span uk-icon="icon: chevron-right"></span>
    </a>
    {% if entry.text %}
    <div class="dk-edit-link uk-visible@s">
      <a href="{% url 'diary:edit' date=date_str %}" class="uk-icon-button uk-margin-small-right" uk-icon="icon: pencil; ratio: 1.3;"></a>
      <a href="{{ entry.admin_changelink }}" class="uk-icon-button uk-margin-small-right" uk-icon="icon: cog; ratio: 1.3;" target="_blank"></a>
    </div>
    {% endif %}
    <div class="dk-entry-date">
      {{ date_obj|date:'F d, Y (l)' }}
      {% if entry.text %}
        {% if entry.done %}
          <span uk-icon="icon: check; ratio: 1" style="color: #75B53C; position: relative; top: -2px;"></span>
        {% else %}
          <span uk-icon="icon: close; ratio: 1" style="color: red; position: relative; top: -2px;"></span>
        {% endif %}
      {% endif %}
    </div>
    <div class="dk-entry-text">
      {% if entry.text %}
        {% autoescape off %}
          {{ entry.html }}
        {% endautoescape %}
      {% else %}
        <br>
        <div class="dk-center-btn">
          <a href="{% url 'diary:edit' date=date_str %}" class="dk-start-edit">
            Начать редактирование
          </a>
        </div>
      {% endif %}
    </div>
  </div>

  {% if entry.files.exists %}
  <div class="uk-margin-top uk-margin-bottom">
    Файлы:  
    {% for file in entry.files.all %}
      <a href="{{ file.data.url }}" class="uk-button uk-button-text uk-margin-small-right" target="_blank">{{ file }}</a>
    {% endfor %}
  </div>
  {% endif %}

  <div class="uk-hidden@s uk-margin-top uk-margin-large-bottom">
    <a href="{% url 'diary:edit' date=date_str %}" class="uk-button uk-button-default dk-mobile-buttons">Изменить</a>
    <a href="{% url 'diary:index' %}" class="uk-button uk-button-default dk-mobile-buttons">Назад</a>
    <br><br>
    <a href="{% url 'diary:detail' date=prev_date|date:'Y-m-d' %}" class="uk-button uk-button-default dk-mobile-buttons">Вчера</a>
    <a href="{% url 'diary:detail' date=next_date|date:'Y-m-d' %}" class="uk-button uk-button-default dk-mobile-buttons">Завтра</a>
  </div>

  <div class="uk-visible@s" style="text-align: center;">
    <br><br>
  </div>

</div>
{% endblock %}
