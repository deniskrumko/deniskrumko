{% extends "base.html" %}
{% load static i18n %}

{% block extrastyle %}
  <link rel="stylesheet" href="{% static 'css/tracks_list.css' %}">
{% endblock %}

{% block extrajs %}
  <script src="{% static 'js/track-list.js' %}" charset="utf-8"></script>
{% endblock %}

{% block body %}

<div class="uk-container uk-container-small">
  {% for artist in artists %}

    <div class="uk-child-width-1-1@s" uk-grid>

      {% for track in artist.tracks.all %}
        {# Single track - start #}
        <div class="uk-card uk-card-default uk-grid-collapse uk-margin uk-background-muted" uk-grid>
          <div class="uk-card-media-left uk-background-cover uk-width-2-5@l uk-width-1-4@m uk-width-1-3@s uk-width-1-3" style="background-image: url('{{ track.image.url }}');">
              <canvas width="300" height="300"></canvas>
          </div>
          <div class="uk-width-3-5@l uk-width-3-4@m uk-width-2-3@s uk-width-2-3">
            <div class="uk-card-body">
              <h3 class="uk-card-title dk-track-name">
                {{ track.name }}
              </h3>
              <p class="uk-card-title dk-track-year">
                {{ track.year }}
              </p>
              <div class="dk-track-description">
                {% autoescape off %}
                  {{ track.short_description }}
                {% endautoescape %}
              </div>
              {# PLAY button #}
              <button type="button" name="button" id="play-track-{{ forloop.counter }}" data-track="track-{{ forloop.counter }}" class="uk-button uk-button-default dk-play-button">
                Play
              </button>
              {# DETAILS button (desktop) #}
              <a href="#" class="uk-button uk-button-text dk-desktop-details">
                Подробнее
              </a>
              {# DETAILS button (mobile) #}
              <a href="#" class="uk-button uk-button-default dk-mobile-details" uk-icon="more"></a>
            </div>
          </div>
          <div class="uk-width-3-5@l uk-width-3-4@m uk-width-2-3@s uk-width-2-3 dk-player-timeline">
            <!--HTML5 audio-->
            <audio id="track-{{ forloop.counter }}" preload="true" style="display: none;">
              <source src="{{ track.file.data.url }}">
            </audio>
            <div class="dk-player-position"></div>
            <div class="dk-player-time"></div>
          </div>
        </div>
        {# Single track - end #}
      {% endfor %}

    </div>
  {% endfor %}
</div>

{% endblock %}
